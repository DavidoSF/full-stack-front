<div class="cart-item">
  <div class="cart-item-image">
    <img [src]="item.imageUrl || 'assets/placeholder.png'" [alt]="item.name" />
  </div>
  <div class="cart-item-details">
    <h3>{{ item.name }}</h3>
    <p class="price">{{ item.price | currency: 'EUR' }}</p>
    <p class="stock" *ngIf="item.stock !== undefined">
      <span [class.low-stock]="showLowStockWarning()" [class.out-of-stock]="item.stock === 0">
        {{ item.stock > 0 ? 'In stock: ' + item.stock : 'Out of stock' }}
      </span>
    </p>
    <p class="stock-warning" *ngIf="getStockWarning()">⚠️ {{ getStockWarning() }}</p>
  </div>
  <div class="cart-item-quantity">
    <button (click)="decreaseQuantity()" [disabled]="item.quantity <= 1">-</button>
    <input
      type="number"
      [value]="item.quantity"
      (change)="onQuantityChange($event)"
      min="1"
      [max]="item.stock || 999"
    />
    <button
      (click)="increaseQuantity()"
      [disabled]="item.stock !== undefined && item.quantity >= item.stock"
    >
      +
    </button>
  </div>
  <div class="cart-item-total">
    <p>{{ item.price * item.quantity | currency: 'EUR' }}</p>
  </div>
  <div class="cart-item-actions">
    <button class="remove-btn" (click)="onRemove()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <polyline points="3 6 5 6 21 6"></polyline>
        <path
          d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
        ></path>
      </svg>
    </button>
  </div>
</div>
